{"version":3,"sources":["/Users/wangzhili/myProject/kvm.js/plugins/commonjs.js"],"names":[],"mappings":"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","file":"commonjs-compiled.js","sourcesContent":["/**\n * 可以使kvm支持commonjs规范\n */\n\n(function(){\n\n\tkvm.module.registerPlugin(function(API){\n\t\tAPI.registerModuleParser(function(){\n\t\t\tfunction uniquePath(paths){\n\t\t\t\tvar i,j;\n\t\t\t\tfor(i=0;i < paths.length;i++){\n\t\t\t\t\tfor(j=i+1;j < paths.length;j++){\n\t\t\t\t\t\tif(paths[i].equal(paths[j])){\n\t\t\t\t\t\t\tpaths.splice(j,1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn paths;\n\t\t\t}\n\t\t\tthis.injectCommonjs = function(){\n\t\t\t\tvar _this = this;\n\t\t\t\tthis.injectors.exports = function () {\n\t\t\t\t\t_this.module.exports = _this.module.exports || {};\n\t\t\t\t\treturn _this.module.exports;\n\t\t\t\t};\n\t\t\t\tthis.injectors.module = function(){\n\t\t\t\t\treturn _this.module;\n\t\t\t\t};\n\t\t\t\tthis.injectors.require = function(){\n\t\t\t\t\treturn function(id){\n\t\t\t\t\t\tvar path = API.createPath(id);\n\t\t\t\t\t\tvar module = path.getModule();\n\t\t\t\t\t\treturn module && module.module && module.module.exports ? module.module.exports : {};\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t\tthis.collectDeps = function(){\n\t\t\t\tvar deps;\n\t\t\t\tif(kvm.isFunction(this.factory)) {\n\t\t\t\t\tdeps = this.parseDependencies(this.factory.toString());\n\t\t\t\t\tdeps = deps.map(function(id){\n\t\t\t\t\t\treturn API.createPath(id);\n\t\t\t\t\t});\n\t\t\t\t\tthis.depPaths = uniquePath(this.depPaths.concat(deps));\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.parseDependencies = function (s) {\n\t\t\t\tif(s.indexOf('require') == -1) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\tvar index = 0, peek, length = s.length, isReg = 1, modName = 0, parentheseState = 0, parentheseStack = [], res = [];\n\t\t\t\twhile(index < length) {\n\t\t\t\t\treadch();\n\t\t\t\t\tif(isBlank()) {\n\t\t\t\t\t}\n\t\t\t\t\telse if(isQuote()) {\n\t\t\t\t\t\tdealQuote();\n\t\t\t\t\t\tisReg = 1\n\t\t\t\t\t}\n\t\t\t\t\telse if(peek == '/') {\n\t\t\t\t\t\treadch();\n\t\t\t\t\t\tif(peek == '/') {\n\t\t\t\t\t\t\tindex = s.indexOf('\\n', index);\n\t\t\t\t\t\t\tif(index == -1) {\n\t\t\t\t\t\t\t\tindex = s.length;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(peek == '*') {\n\t\t\t\t\t\t\tindex = s.indexOf('*/', index);\n\t\t\t\t\t\t\tif(index == -1) {\n\t\t\t\t\t\t\t\tindex = length;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tindex += 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(isReg) {\n\t\t\t\t\t\t\tdealReg();\n\t\t\t\t\t\t\tisReg = 0\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tindex--;\n\t\t\t\t\t\t\tisReg = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(isWord()) {\n\t\t\t\t\t\tdealWord();\n\t\t\t\t\t}\n\t\t\t\t\telse if(isNumber()) {\n\t\t\t\t\t\tdealNumber();\n\t\t\t\t\t}\n\t\t\t\t\telse if(peek == '(') {\n\t\t\t\t\t\tparentheseStack.push(parentheseState);\n\t\t\t\t\t\tisReg = 1\n\t\t\t\t\t}\n\t\t\t\t\telse if(peek == ')') {\n\t\t\t\t\t\tisReg = parentheseStack.pop();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tisReg = peek != ']';\n\t\t\t\t\t\tmodName = 0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn res;\n\t\t\t\tfunction readch() {\n\t\t\t\t\tpeek = s.charAt(index++);\n\t\t\t\t}\n\t\t\t\tfunction isBlank() {\n\t\t\t\t\treturn /\\s/.test(peek);\n\t\t\t\t}\n\t\t\t\tfunction isQuote() {\n\t\t\t\t\treturn peek == '\"' || peek == \"'\";\n\t\t\t\t}\n\t\t\t\tfunction dealQuote() {\n\t\t\t\t\tvar start = index;\n\t\t\t\t\tvar c = peek;\n\t\t\t\t\tvar end = s.indexOf(c, start);\n\t\t\t\t\tif(end == -1) {\n\t\t\t\t\t\tindex = length;\n\t\t\t\t\t}\n\t\t\t\t\telse if(s.charAt(end - 1) != '\\\\') {\n\t\t\t\t\t\tindex = end + 1;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\twhile(index < length) {\n\t\t\t\t\t\t\treadch();\n\t\t\t\t\t\t\tif(peek == '\\\\') {\n\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(peek == c) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(modName) {\n\t\t\t\t\t\tres.push(s.slice(start, index - 1));\n\t\t\t\t\t\tmodName = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfunction dealReg() {\n\t\t\t\t\tindex--;\n\t\t\t\t\twhile(index < length) {\n\t\t\t\t\t\treadch();\n\t\t\t\t\t\tif(peek == '\\\\') {\n\t\t\t\t\t\t\tindex++\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(peek == '/') {\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(peek == '[') {\n\t\t\t\t\t\t\twhile(index < length) {\n\t\t\t\t\t\t\t\treadch();\n\t\t\t\t\t\t\t\tif(peek == '\\\\') {\n\t\t\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(peek == ']') {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfunction isWord() {\n\t\t\t\t\treturn /[a-z_$]/i.test(peek);\n\t\t\t\t}\n\t\t\t\tfunction dealWord() {\n\t\t\t\t\tvar s2 = s.slice(index - 1);\n\t\t\t\t\tvar r = /^[\\w$]+/.exec(s2)[0];\n\t\t\t\t\tparentheseState = {\n\t\t\t\t\t\t'if': 1,\n\t\t\t\t\t\t'for': 1,\n\t\t\t\t\t\t'while': 1,\n\t\t\t\t\t\t'with': 1\n\t\t\t\t\t}[r];\n\t\t\t\t\tisReg = {\n\t\t\t\t\t\t'break': 1,\n\t\t\t\t\t\t'case': 1,\n\t\t\t\t\t\t'continue': 1,\n\t\t\t\t\t\t'debugger': 1,\n\t\t\t\t\t\t'delete': 1,\n\t\t\t\t\t\t'do': 1,\n\t\t\t\t\t\t'else': 1,\n\t\t\t\t\t\t'false': 1,\n\t\t\t\t\t\t'if': 1,\n\t\t\t\t\t\t'in': 1,\n\t\t\t\t\t\t'instanceof': 1,\n\t\t\t\t\t\t'return': 1,\n\t\t\t\t\t\t'typeof': 1,\n\t\t\t\t\t\t'void': 1\n\t\t\t\t\t}[r];\n\t\t\t\t\tmodName = /^require\\s*\\(\\s*(['\"]).+?\\1\\s*\\)/.test(s2);\n\t\t\t\t\tif(modName) {\n\t\t\t\t\t\tr = /^require\\s*\\(\\s*['\"]/.exec(s2)[0];\n\t\t\t\t\t\tindex += r.length - 2;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tindex += /^[\\w$]+(?:\\s*\\.\\s*[\\w$]+)*/.exec(s2)[0].length - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfunction isNumber() {\n\t\t\t\t\treturn /\\d/.test(peek)\n\t\t\t\t\t\t|| peek == '.' && /\\d/.test(s.charAt(index));\n\t\t\t\t}\n\t\t\t\tfunction dealNumber() {\n\t\t\t\t\tvar s2 = s.slice(index - 1);\n\t\t\t\t\tvar r;\n\t\t\t\t\tif(peek == '.') {\n\t\t\t\t\t\tr = /^\\.\\d+(?:E[+-]?\\d*)?\\s*/i.exec(s2)[0];\n\t\t\t\t\t}\n\t\t\t\t\telse if(/^0x[\\da-f]*/i.test(s2)) {\n\t\t\t\t\t\tr = /^0x[\\da-f]*\\s*/i.exec(s2)[0];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tr = /^\\d+\\.?\\d*(?:E[+-]?\\d*)?\\s*/i.exec(s2)[0];\n\t\t\t\t\t}\n\t\t\t\t\tindex += r.length - 1;\n\t\t\t\t\tisReg = 0;\n\t\t\t\t}\n\t\t\t};\n\t\t\tfunction needParse(depPaths){\n\t\t\t\tvar result = false;\n\t\t\t\tkvm.forEach(depPaths,function(path){\n\t\t\t\t\tif(path.id == \"require\"){\n\t\t\t\t\t\tresult = true;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tthis.injectCommonjs();\n\t\t\tif(this.factory && needParse(this.depPaths)) {\n\t\t\t\tthis.collectDeps();\n\t\t\t}\n\t\t});\n\t});\n})();\n"]}